# List IPs:
sudo iptables -L INPUT -n --line-numbers

# Adding IP to block:
sudo iptables -A INPUT -s x.x.x.x -j DROP
sudo iptables -A OUTPUT -d x.x.x.x -j DROP

#Removing IP from user configurations:
sudo iptables -D INPUT [number on side]

#Removing all iptable configuations:
sudo iptables -F

#Blocking ipv4 addresses:
sudo iptables -A INPUT -s x.x.x.x -j DROP
sudo iptables -A OUTPUT -s x.x.x.x -j DROP


#Blacklisting all IP addresses:
sudo iptables -P INPUT DROP
sudo iptables -P OUTPUT DROP

#Whitelisting all IP addresses:
sudo iptables -P OUTPUT Accept
sudo iptables -P INPUT DROP

#Saving configuations to kernel:
sudo iptables-save

#Blocking all traffic coming into port with exeptions of whitelisted ip:
sudo iptables -A INPUT -p tcp --dport 8000 -s 1.2.3.4 -j ACCEPT
sudo iptables -A INPUT -p tcp --dport 8000 -j DROP

  another option for this same system ^:
  sudo iptables -A INPUT -p tcp --dport 8000 -s ! 1.2.3.4 -j DROP
  
#Swapping out configuation files and saving iptables configuations:
  Saving iptables configuation:
  sudo iptables-save > myfile
  
  Loading iptables configuation:
  sudo iptables-load < myfile 
  
# Blocking all ports with exeptions to ssh script (port 22) and http (port 80)



#Open port (in example ssh or port 22) to only one IP:
sudo iptables -A INPUT -p tcp --dport 22 -s YourIP -j ACCEPT
sudo iptables -A INPUT -p tcp --dport 22 -j DROP





#!/bin/bash
IPTABLES=/sbin/iptables

#start and flush
$IPTABLES -F
$IPTABLES -t nat -F
$IPTABLES -X
$IPTABLES -P FORWARD DROP
$IPTABLES -P INPUT   DROP
$IPTABLES -P OUTPUT  ACCEPT

#SSH traffic
$IPTABLES -A INPUT -p tcp --dport 22 -j ACCEPT
#HTTP traffic
$IPTABLES -A INPUT -p tcp --dport 80 -j ACCEPT

#loopback
iptables -A INPUT -i lo -p all -j ACCEPT
 
 
 
 
 ##Note: Could use whiptail? https://en.wikibooks.org/wiki/Bash_Shell_Scripting/Whiptail
 
 
  ##Note: Remember to write this all out by hand, just in case of hidden characters.
  
 

